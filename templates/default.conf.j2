upstream {{ nginx_project_name }} {
    server {{ nginx_server_name }}:{{ nginx_port }}; # for a web port socket (we'll use this first)
}

server {
    listen {{ nginx.port }};
    server_name {{ nginx.server_name }};

    location /favicon.ico {
        alias {{ nginx_favicon }};
    }

    location /static/ {
        alias {{ nginx_path_static }}/;
    }

    location /media/ {
        alias {{ nginx_path_media }}/;
    }

    location / {
      {% if nginx_uwsgi_enabled is True %}
        include         uwsgi_params;
        uwsgi_pass      {{ nginx_project_name }};
        #uwsgi_pass unix://var/run/uwsgi/flaskapp.sock;
      {% endif %}
        add_header P3P 'CP="ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV"';
        # proxy_set_header Host $http_host;
        # proxy_set_header X-Real-IP $remote_addr;
        # proxy_set_header X-Scheme $scheme;
        # proxy_pass {{ nginx.proxy_pass}};
        # proxy_next_upstream error;
    }

    access_log {{ _nginx_file_path_log }}.access_log;
    error_log {{ _nginx_file_path_log }}.error_log;
}
